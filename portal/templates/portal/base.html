<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <title>InfoCampus | Learning Platform</title>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Plus Jakarta Sans', 'sans-serif'] },
                    colors: { campus: { blue: '#0052CC', mint: '#00A389', slate: '#0F172A', bg: '#F8FAFC' } }
                }
            }
        }
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
        }
    </script>

    <style>
        * { transition: background-color 0.3s ease, color 0.3s ease; }
        .glass-sidebar { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); border-right: 1px solid #E2E8F0; }
        .dark .glass-sidebar { background: rgba(15, 23, 42, 0.9); border-right: 1px solid #1E293B; }
    </style>
</head>
<body class="min-h-screen flex bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100">

    <aside class="w-72 fixed h-full flex flex-col p-6 glass-sidebar z-50">
        <div class="flex items-center gap-3 px-2 mb-8">
            <div class="w-10 h-10 bg-campus-blue rounded-xl flex items-center justify-center text-white font-bold">IC</div>
            <span class="text-xl font-extrabold tracking-tight dark:text-white">InfoCampus</span>
        </div>

        <div class="px-4 py-3 mb-6 bg-slate-100/50 dark:bg-slate-800/50 rounded-2xl border border-slate-200 dark:border-slate-700">
            <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Usuario</p>
            <p class="text-sm font-bold truncate">{{ user.username }}</p>
            {% if user.perfil %}
                <span class="text-[10px] px-2 py-0.5 bg-campus-blue/10 text-campus-blue rounded-full border border-campus-blue/20">
                    {{ user.perfil.get_rol_display }}
                </span>
            {% endif %}
        </div>

        <nav class="flex-1 space-y-1 overflow-y-auto">
            <div class="pb-4">
                <p class="px-4 text-[11px] font-bold text-slate-400 uppercase mb-2 tracking-widest">General</p>
                <a href="{% url 'dashboard' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800">
                    Resumen
                </a>
            </div>

            {% if user.perfil.rol == 'admin' or user.perfil.rol == 'administrativo' %}
            <div class="py-4 border-t border-slate-100 dark:border-slate-800">
                <p class="px-4 text-[11px] font-bold text-slate-400 uppercase mb-2 tracking-widest">Gestión</p>
                <a href="{% url 'gestion_materias' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800">Materias</a>
                <a href="{% url 'gestion_estudiantes' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800">Estudiantes</a>
                <a href="{% url 'inscribir_estudiante' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800">Inscripciones</a>
            </div>
            {% endif %}

            {% if user.perfil.rol == 'profesor' or user.perfil.rol == 'admin' %}
            <div class="py-4 border-t border-slate-100 dark:border-slate-800">
                <p class="px-4 text-[11px] font-bold text-slate-400 uppercase mb-2 tracking-widest">Docente</p>
                <a href="#" class="flex items-center gap-3 px-4 py-2.5 rounded-xl text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 italic">Notas</a>
            </div>
            {% endif %}
        </nav>

        <div class="pt-4 border-t border-slate-100 dark:border-slate-800 space-y-2">
            <button onclick="toggleDarkMode()" class="w-full flex items-center gap-3 px-4 py-3 rounded-2xl text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800">
                Modo Día/Noche
            </button>
            <a href="/admin/logout/" class="w-full flex items-center gap-3 px-4 py-3 rounded-2xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 font-bold">
                Cerrar Sesión
            </a>
        </div>
    </aside>

    <main class="flex-1 ml-72 p-12 overflow-y-auto">
        {% block content %}{% endblock %}
    </main>

</body>
</html>